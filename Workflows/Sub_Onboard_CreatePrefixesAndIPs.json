{
  "workflow": {
    "unique_name": "definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA",
    "name": "[Sub-Onboard] Create Prefixes and IPs",
    "title": "[Sub-Onboard] Create Prefixes and IPs",
    "type": "generic.workflow",
    "base_type": "workflow",
    "variables": [
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "Current Device Name",
          "type": "datatype.string",
          "description": "Name of current device",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxJ",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "Uplink Interface ID",
          "type": "datatype.string",
          "description": "ID of the Uplink interface",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxL",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.integer",
        "properties": {
          "value": 0,
          "scope": "local",
          "name": "Device Counter",
          "type": "datatype.integer",
          "description": "Counter for device iteration",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": ""
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxF",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.integer",
        "properties": {
          "value": 0,
          "scope": "local",
          "name": "Device Count",
          "type": "datatype.integer",
          "description": "Total number of devices to process",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": ""
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxG",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "Device IP Address",
          "type": "datatype.string",
          "description": "IP address from Catalyst Center",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxK",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "Tenant ID",
          "type": "datatype.string",
          "description": "ID of tenant from NetBox lookup",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxC",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "MGMT VLAN ID",
          "type": "datatype.string",
          "description": "ID of MGMT VLAN",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxD",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "input",
          "name": "Tenant Name",
          "type": "datatype.string",
          "description": "Name of the tenant in NetBox",
          "is_required": true,
          "display_on_wizard": true,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxB",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "[]",
          "scope": "local",
          "name": "Devices Array",
          "type": "datatype.string",
          "description": "JSON array of devices to process",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxE",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "Current Device ID",
          "type": "datatype.string",
          "description": "ID of current device being processed",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxH",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "MGMT Interface ID",
          "type": "datatype.string",
          "description": "ID of created MGMT interface",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxM",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "IP Address ID",
          "type": "datatype.string",
          "description": "ID of created IP address",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxN",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "Current Device Serial",
          "type": "datatype.string",
          "description": "Serial number of current device",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false,
          "variable_string_format": "text"
        },
        "unique_name": "variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxI",
        "object_type": "variable_workflow"
      }
    ],
    "properties": {
      "atomic": {
        "is_atomic": false
      },
      "delete_workflow_instance": false,
      "description": "Creates prefixes, interfaces, and assigns primary IPs for devices in NetBox.\n\nWorkflow:\n1. Looks up tenant ID from provided tenant name\n2. Gets MGMT VLAN from NetBox\n3. Gets all devices with status 'planned' and no primary IP\n4. For each device:\n   - Queries Catalyst Center PnP API to get device IP by serial number\n   - Gets the Uplink interface from NetBox\n   - Creates a Vlan1 interface with label 'MGMT'\n   - Creates a /24 prefix if it doesn't exist\n   - Creates an IP address and assigns it to the interface\n   - Updates the device's primary_ip4\n\nPrerequisites:\n- Atomic workflows must be imported\n- NetBox and Catalyst Center targets must be configured\n- Devices must have contacted Catalyst Center (have IP in PnP)",
      "display_name": "[Sub-Onboard] Create Prefixes and IPs",
      "runtime_user": {
        "target_default": true
      },
      "target": {
        "execute_on_target_group": true,
        "target_group": {
          "target_group_id": "target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4",
          "run_on_all_targets": false,
          "selected_target_types": [
            "web-service.endpoint",
            "catalystcenter.endpoint",
            "netbox.endpoint",
            "terminal.unix_linux_endpoint"
          ],
          "use_criteria": {
            "choose_target_using_algorithm": "choose_first_with_matching_criteria",
            "conditions": [
              {
                "operator": "eq",
                "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                "right_operand": "$global.variable_02RYFOC3YODIW3enGXTKI03lEs1mRnrYdpk.global.variable_02RYFOC3YODIW3enGXTKI03lEs1mRnrYdpk$"
              }
            ]
          }
        }
      }
    },
    "object_type": "definition_workflow",
    "actions": [
      {
        "unique_name": "definition_activity_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBx1",
        "name": "Group",
        "title": "Get Tenant ID from NetBox",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Get Tenant ID from NetBox",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBx2",
            "name": "Get Data from NetBox",
            "title": "Get Tenant by Name",
            "type": "workflow.atomic_workflow",
            "base_type": "subworkflow",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Get Tenant by Name",
              "input": {
                "variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxB": "api/tenancy/tenants/",
                "variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxC": "name=$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.input.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxB$"
              },
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "override_workflow_target_group_criteria": true,
                "target_group": {
                  "run_on_all_targets": false,
                  "use_criteria": {
                    "choose_target_using_algorithm": "choose_first_with_matching_criteria",
                    "conditions": [
                      {
                        "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                        "operator": "eq",
                        "right_operand": "$global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh.global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh$"
                      }
                    ]
                  }
                }
              },
              "workflow_id": "definition_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxA",
              "workflow_name": "Get Data from NetBox"
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBx3",
            "name": "JSONPath Query",
            "title": "Extract Tenant ID",
            "type": "corejava.jsonpathquery",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "continue_on_failure": false,
              "display_name": "Extract Tenant ID",
              "input_json": "$activity.definition_activity_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBx2.output.variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxD$",
              "jsonpath_queries": [
                {
                  "jsonpath_query": "$[0].id",
                  "jsonpath_query_name": "tenant_id",
                  "jsonpath_query_type": "string"
                }
              ],
              "skip_execution": false
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBx4",
            "name": "Set Variables",
            "title": "Store Tenant ID",
            "type": "core.set_multiple_variables",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Store Tenant ID",
              "skip_execution": false,
              "variables_to_update": [
                {
                  "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxC$",
                  "variable_value_new": "$activity.definition_activity_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBx3.output.jsonpath_queries.tenant_id$"
                }
              ]
            },
            "object_type": "definition_activity"
          }
        ]
      },
      {
        "unique_name": "definition_activity_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBx8",
        "name": "Group",
        "title": "Get MGMT VLAN and Planned Devices",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Get MGMT VLAN and Planned Devices",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBx9",
            "name": "Get Data from NetBox",
            "title": "Get MGMT VLAN",
            "type": "workflow.atomic_workflow",
            "base_type": "subworkflow",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Get MGMT VLAN",
              "input": {
                "variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxB": "api/ipam/vlans/",
                "variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxC": "name=MGMT"
              },
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "override_workflow_target_group_criteria": true,
                "target_group": {
                  "run_on_all_targets": false,
                  "use_criteria": {
                    "choose_target_using_algorithm": "choose_first_with_matching_criteria",
                    "conditions": [
                      {
                        "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                        "operator": "eq",
                        "right_operand": "$global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh.global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh$"
                      }
                    ]
                  }
                }
              },
              "workflow_id": "definition_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxA",
              "workflow_name": "Get Data from NetBox"
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RVW6REPGI231DbOh04cxp3FsPI70BuDeV",
            "name": "JSONPath Query",
            "title": "Extract VLAN ID",
            "type": "corejava.jsonpathquery",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "continue_on_failure": false,
              "display_name": "Extract VLAN ID",
              "input_json": "$activity.definition_activity_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBx9.output.variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxD$",
              "jsonpath_queries": [
                {
                  "jsonpath_query": "$[0].id",
                  "jsonpath_query_name": "vlan_id",
                  "jsonpath_query_type": "string"
                }
              ],
              "skip_execution": false
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RVW6RG0BXF83mK3SHWdlW7h4Y1k4xO7k7",
            "name": "Set Variables",
            "title": "Store VLAN ID",
            "type": "core.set_multiple_variables",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Store VLAN ID",
              "skip_execution": false,
              "variables_to_update": [
                {
                  "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxD$",
                  "variable_value_new": "$activity.definition_activity_02RVW6REPGI231DbOh04cxp3FsPI70BuDeV.output.jsonpath_queries.vlan_id$"
                }
              ]
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RVW6RHYTNSH6RGN0AhCki5gkQ9vueqEvq",
            "name": "Get Data from NetBox",
            "title": "Get Planned Devices Without Primary IP",
            "type": "workflow.atomic_workflow",
            "base_type": "subworkflow",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Get Planned Devices Without Primary IP",
              "input": {
                "variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxB": "api/dcim/devices/",
                "variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxC": "status=planned&has_primary_ip=false"
              },
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "override_workflow_target_group_criteria": true,
                "target_group": {
                  "run_on_all_targets": false,
                  "use_criteria": {
                    "choose_target_using_algorithm": "choose_first_with_matching_criteria",
                    "conditions": [
                      {
                        "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                        "operator": "eq",
                        "right_operand": "$global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh.global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh$"
                      }
                    ]
                  }
                }
              },
              "workflow_id": "definition_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxA",
              "workflow_name": "Get Data from NetBox"
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RVW6RJERK014MD0r9LRmKEWJ5Jo8IRK8l",
            "name": "Execute Python Script",
            "title": "Parse Devices",
            "type": "python3.script",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "continue_on_failure": false,
              "display_name": "Parse Devices",
              "script": "import json\nimport sys\n\ndevices = json.loads(sys.argv[1]) if sys.argv[1] else []\ndevices_array = json.dumps(devices)\ndevice_count = len(devices)",
              "script_arguments": [
                "$activity.definition_activity_02RVW6RHYTNSH6RGN0AhCki5gkQ9vueqEvq.output.variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxD$"
              ],
              "script_queries": [
                {
                  "script_query": "devices_array",
                  "script_query_name": "devices_array",
                  "script_query_type": "string"
                },
                {
                  "script_query": "device_count",
                  "script_query_name": "device_count",
                  "script_query_type": "integer"
                }
              ],
              "skip_execution": false
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02RVW6RL9Q12D6PgkLNiFHXhF3plAaSdi6E",
            "name": "Set Variables",
            "title": "Store Devices",
            "type": "core.set_multiple_variables",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Store Devices",
              "skip_execution": false,
              "variables_to_update": [
                {
                  "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxE$",
                  "variable_value_new": "$activity.definition_activity_02RVW6RJERK014MD0r9LRmKEWJ5Jo8IRK8l.output.script_queries.devices_array$"
                },
                {
                  "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxG$",
                  "variable_value_new": "$activity.definition_activity_02RVW6RJERK014MD0r9LRmKEWJ5Jo8IRK8l.output.script_queries.device_count$"
                },
                {
                  "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxF$",
                  "variable_value_new": 0
                }
              ]
            },
            "object_type": "definition_activity"
          }
        ]
      },
      {
        "unique_name": "definition_activity_02RVW6RNAE2X56S9yPffeqbRqjLTv13p8oe",
        "name": "While Loop",
        "title": "Process Each Device",
        "type": "logic.while",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Process Each Device",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "blocks": [
          {
            "unique_name": "definition_activity_02RVW6RP6N14F73WyrqPLgYuZ2rJP9DtCJu",
            "name": "Condition Branch",
            "title": "While Device Counter < Device Count",
            "type": "logic.condition_block",
            "base_type": "activity",
            "properties": {
              "condition": {
                "left_operand": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxF$",
                "operator": "lt",
                "right_operand": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxG$"
              },
              "continue_on_failure": false,
              "display_name": "While Device Counter < Device Count",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "actions": [
              {
                "unique_name": "definition_activity_02RVW6RQN2DZG4rHP2sQdH2E7RxMmXhMwkM",
                "name": "Execute Python Script",
                "title": "Get Current Device Info",
                "type": "python3.script",
                "base_type": "activity",
                "properties": {
                  "action_timeout": 180,
                  "continue_on_failure": false,
                  "display_name": "Get Current Device Info",
                  "script": "import json\nimport sys\n\ndevices = json.loads(sys.argv[1]) if sys.argv[1] else []\nindex = int(sys.argv[2])\n\nif index < len(devices):\n    device = devices[index]\n    device_id = str(device.get('id', ''))\n    device_serial = device.get('serial', '')\n    device_name = device.get('name', '')\nelse:\n    device_id = ''\n    device_serial = ''\n    device_name = ''",
                  "script_arguments": [
                    "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxE$",
                    "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxF$"
                  ],
                  "script_queries": [
                    {
                      "script_query": "device_id",
                      "script_query_name": "device_id",
                      "script_query_type": "string"
                    },
                    {
                      "script_query": "device_serial",
                      "script_query_name": "device_serial",
                      "script_query_type": "string"
                    },
                    {
                      "script_query": "device_name",
                      "script_query_name": "device_name",
                      "script_query_type": "string"
                    }
                  ],
                  "skip_execution": false
                },
                "object_type": "definition_activity"
              },
              {
                "unique_name": "definition_activity_02RVW6RS0084M3N1EG79zMcuECzwYMKUxAi",
                "name": "Set Variables",
                "title": "Store Current Device Info",
                "type": "core.set_multiple_variables",
                "base_type": "activity",
                "properties": {
                  "continue_on_failure": false,
                  "display_name": "Store Current Device Info",
                  "skip_execution": false,
                  "variables_to_update": [
                    {
                      "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxH$",
                      "variable_value_new": "$activity.definition_activity_02RVW6RQN2DZG4rHP2sQdH2E7RxMmXhMwkM.output.script_queries.device_id$"
                    },
                    {
                      "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxI$",
                      "variable_value_new": "$activity.definition_activity_02RVW6RQN2DZG4rHP2sQdH2E7RxMmXhMwkM.output.script_queries.device_serial$"
                    },
                    {
                      "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxJ$",
                      "variable_value_new": "$activity.definition_activity_02RVW6RQN2DZG4rHP2sQdH2E7RxMmXhMwkM.output.script_queries.device_name$"
                    }
                  ]
                },
                "object_type": "definition_activity"
              },
              {
                "unique_name": "definition_activity_02RVW6RTLMS0141pfsEfWFWo9nKyaMQCNl9",
                "name": "Group",
                "title": "Get IP from Catalyst Center and Create Resources",
                "type": "logic.group",
                "base_type": "activity",
                "properties": {
                  "continue_on_failure": true,
                  "display_name": "Get IP from Catalyst Center and Create Resources",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "actions": [
                  {
                    "unique_name": "definition_activity_02RVWA4NCWICM70eKgDyP7tLe5LvHfAlhPU",
                    "name": "Generic Catalyst Center API Request",
                    "title": "Get PnP Devices from Catalyst Center",
                    "type": "catalystcenter.invoke_api",
                    "base_type": "activity",
                    "properties": {
                      "_endpoint": "/dna/intent/api/v1/onboarding/pnp-device?serialNumber=$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxI$",
                      "_method": "GET",
                      "action_timeout": 180,
                      "continue_on_failure": true,
                      "description": "Query Catalyst Center PnP API to get device by serial number",
                      "display_name": "Get PnP Devices from Catalyst Center",
                      "runtime_user": {
                        "target_default": true
                      },
                      "skip_execution": false,
                      "target": {
                        "override_workflow_target_group_criteria": true,
                        "target_group": {
                          "run_on_all_targets": false,
                          "use_criteria": {
                            "choose_target_using_algorithm": "choose_first_with_matching_criteria",
                            "conditions": [
                              {
                                "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                                "operator": "eq",
                                "right_operand": "$global.variable_02RYFOC3YODIW3enGXTKI03lEs1mRnrYdpk.global.variable_02RYFOC3YODIW3enGXTKI03lEs1mRnrYdpk$"
                              }
                            ]
                          }
                        }
                      }
                    },
                    "object_type": "definition_activity"
                  },
                  {
                    "unique_name": "definition_activity_02RVW6RY5X6MO6tx0E4VpnTIzveggLKnRvc",
                    "name": "Execute Python Script",
                    "title": "Extract IP Address from PnP Response",
                    "type": "python3.script",
                    "base_type": "activity",
                    "properties": {
                      "action_timeout": 180,
                      "continue_on_failure": true,
                      "display_name": "Extract IP Address from PnP Response",
                      "script": "import json\nimport sys\n\nip_address = ''\ntry:\n    response = json.loads(sys.argv[1]) if sys.argv[1] else []\n    # PnP device response is a list of devices\n    # Extract IP from deviceInfo.httpHeaders[].value\n    if isinstance(response, list) and len(response) > 0:\n        device_info = response[0].get('deviceInfo', {})\n        http_headers = device_info.get('httpHeaders', [])\n        for header in http_headers:\n            if 'value' in header:\n                ip_address = header['value']\n                break\n    elif isinstance(response, dict):\n        device_info = response.get('deviceInfo', {})\n        http_headers = device_info.get('httpHeaders', [])\n        for header in http_headers:\n            if 'value' in header:\n                ip_address = header['value']\n                break\nexcept:\n    ip_address = ''",
                      "script_arguments": [
                        "$activity.definition_activity_02RVWA4NCWICM70eKgDyP7tLe5LvHfAlhPU.output.raw_body$"
                      ],
                      "script_queries": [
                        {
                          "script_query": "ip_address",
                          "script_query_name": "ip_address",
                          "script_query_type": "string"
                        }
                      ],
                      "skip_execution": false
                    },
                    "object_type": "definition_activity"
                  },
                  {
                    "unique_name": "definition_activity_02RVW6RZTGBZ75pRjtb1kCFg8Illm92rXb1",
                    "name": "Set Variables",
                    "title": "Store IP Address",
                    "type": "core.set_multiple_variables",
                    "base_type": "activity",
                    "properties": {
                      "continue_on_failure": false,
                      "display_name": "Store IP Address",
                      "skip_execution": false,
                      "variables_to_update": [
                        {
                          "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxK$",
                          "variable_value_new": "$activity.definition_activity_02RVW6RY5X6MO6tx0E4VpnTIzveggLKnRvc.output.script_queries.ip_address$"
                        }
                      ]
                    },
                    "object_type": "definition_activity"
                  },
                  {
                    "unique_name": "definition_activity_02RVW6S185KWQ2U2rqgc1esefK6V06NR02k",
                    "name": "Condition Block",
                    "title": "IP Address Found?",
                    "type": "logic.if_else",
                    "base_type": "activity",
                    "properties": {
                      "continue_on_failure": false,
                      "display_name": "IP Address Found?",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity",
                    "blocks": [
                      {
                        "unique_name": "definition_activity_02RVW6S2JN21X6Vf8QN4dm9MYsPW2lgjSqX",
                        "name": "Condition Branch",
                        "title": "If IP Address Found",
                        "type": "logic.condition_block",
                        "base_type": "activity",
                        "properties": {
                          "condition": {
                            "left_operand": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxK$",
                            "operator": "ne",
                            "right_operand": ""
                          },
                          "continue_on_failure": false,
                          "display_name": "If IP Address Found",
                          "skip_execution": false
                        },
                        "object_type": "definition_activity",
                        "actions": [
                          {
                            "unique_name": "definition_activity_02RVW6S4JBJBQ3bGUd2cf1AMbBmknqHXAx0",
                            "name": "Get Data from NetBox",
                            "title": "Get Uplink Interface",
                            "type": "workflow.atomic_workflow",
                            "base_type": "subworkflow",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Get Uplink Interface",
                              "input": {
                                "variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxB": "api/dcim/interfaces/",
                                "variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxC": "device_id=$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxH$&label=Uplink"
                              },
                              "runtime_user": {
                                "target_default": true
                              },
                              "skip_execution": false,
                              "target": {
                                "override_workflow_target_group_criteria": true,
                                "target_group": {
                                  "run_on_all_targets": false,
                                  "use_criteria": {
                                    "choose_target_using_algorithm": "choose_first_with_matching_criteria",
                                    "conditions": [
                                      {
                                        "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                                        "operator": "eq",
                                        "right_operand": "$global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh.global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh$"
                                      }
                                    ]
                                  }
                                }
                              },
                              "workflow_id": "definition_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxA",
                              "workflow_name": "Get Data from NetBox"
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6S628S6N5VDfH6qbDcYAc96ohk5SbE",
                            "name": "JSONPath Query",
                            "title": "Extract Uplink Interface ID",
                            "type": "corejava.jsonpathquery",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "continue_on_failure": true,
                              "display_name": "Extract Uplink Interface ID",
                              "input_json": "$activity.definition_activity_02RVW6S4JBJBQ3bGUd2cf1AMbBmknqHXAx0.output.variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxD$",
                              "jsonpath_queries": [
                                {
                                  "jsonpath_query": "$[0].id",
                                  "jsonpath_query_name": "uplink_id",
                                  "jsonpath_query_type": "string"
                                }
                              ],
                              "skip_execution": false
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6S7JWWEW7F69soKRLM1D8RaXAlUZO2",
                            "name": "Set Variables",
                            "title": "Store Uplink ID",
                            "type": "core.set_multiple_variables",
                            "base_type": "activity",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Store Uplink ID",
                              "skip_execution": false,
                              "variables_to_update": [
                                {
                                  "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxL$",
                                  "variable_value_new": "$activity.definition_activity_02RVW6S628S6N5VDfH6qbDcYAc96ohk5SbE.output.jsonpath_queries.uplink_id$"
                                }
                              ]
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6S8ZUAZ81due4cfX0BQltLoE5FW7vS",
                            "name": "Execute Python Script",
                            "title": "Build MGMT Interface JSON",
                            "type": "python3.script",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "continue_on_failure": false,
                              "display_name": "Build MGMT Interface JSON",
                              "script": "import json\nimport sys\n\ndevice_id = int(sys.argv[1])\nparent_id = int(sys.argv[2])\n\ninterface_body = {\n    'device': device_id,\n    'name': 'Vlan1',\n    'type': 'virtual',\n    'label': 'MGMT',\n    'enabled': True,\n    'parent': parent_id\n}\ninterface_json = json.dumps(interface_body)",
                              "script_arguments": [
                                "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxH$",
                                "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxL$"
                              ],
                              "script_queries": [
                                {
                                  "script_query": "interface_json",
                                  "script_query_name": "interface_json",
                                  "script_query_type": "string"
                                }
                              ],
                              "skip_execution": false
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6SAUVPV427TsMNreOUPt4T1HH7Vrhu",
                            "name": "Post Data to NetBox",
                            "title": "Create MGMT Interface",
                            "type": "workflow.atomic_workflow",
                            "base_type": "subworkflow",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Create MGMT Interface",
                              "input": {
                                "variable_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxB": "api/dcim/interfaces/",
                                "variable_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxC": "$activity.definition_activity_02RVW6S8ZUAZ81due4cfX0BQltLoE5FW7vS.output.script_queries.interface_json$"
                              },
                              "runtime_user": {
                                "target_default": true
                              },
                              "skip_execution": false,
                              "target": {
                                "override_workflow_target_group_criteria": true,
                                "target_group": {
                                  "run_on_all_targets": false,
                                  "use_criteria": {
                                    "choose_target_using_algorithm": "choose_first_with_matching_criteria",
                                    "conditions": [
                                      {
                                        "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                                        "operator": "eq",
                                        "right_operand": "$global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh.global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh$"
                                      }
                                    ]
                                  }
                                }
                              },
                              "workflow_id": "definition_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxA",
                              "workflow_name": "Post Data to NetBox"
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6SFPUTZK5TJPp8EnQQfdyoNTe5Ket3",
                            "name": "Set Variables",
                            "title": "Store MGMT Interface ID",
                            "type": "core.set_multiple_variables",
                            "base_type": "activity",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Store MGMT Interface ID",
                              "skip_execution": false,
                              "variables_to_update": [
                                {
                                  "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxM$",
                                  "variable_value_new": "$activity.definition_activity_02RVW6SAUVPV427TsMNreOUPt4T1HH7Vrhu.output.variable_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxE$"
                                }
                              ]
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6SH2XS327X0wkT5VAp43l2oM9VrqiP",
                            "name": "Execute Python Script",
                            "title": "Build Prefix and IP JSON",
                            "type": "python3.script",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "continue_on_failure": false,
                              "display_name": "Build Prefix and IP JSON",
                              "script": "import json\nimport sys\n\nip_address = sys.argv[1]\ntenant_id = int(sys.argv[2])\nvlan_id = int(sys.argv[3])\ninterface_id = int(sys.argv[4])\n\n# Calculate parent prefix\noctets = ip_address.split('.')\nparent_prefix = f\"{octets[0]}.{octets[1]}.{octets[2]}.0/24\"\n\nprefix_body = {\n    'prefix': parent_prefix,\n    'tenant': tenant_id,\n    'vlan': vlan_id,\n    'status': 'active'\n}\nprefix_json = json.dumps(prefix_body)\n\nip_body = {\n    'address': f\"{ip_address}/24\",\n    'assigned_object_type': 'dcim.interface',\n    'assigned_object_id': interface_id,\n    'tenant': tenant_id\n}\nip_json = json.dumps(ip_body)",
                              "script_arguments": [
                                "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxK$",
                                "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxC$",
                                "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxD$",
                                "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxM$"
                              ],
                              "script_queries": [
                                {
                                  "script_query": "prefix_json",
                                  "script_query_name": "prefix_json",
                                  "script_query_type": "string"
                                },
                                {
                                  "script_query": "ip_json",
                                  "script_query_name": "ip_json",
                                  "script_query_type": "string"
                                },
                                {
                                  "script_query": "parent_prefix",
                                  "script_query_name": "parent_prefix",
                                  "script_query_type": "string"
                                }
                              ],
                              "skip_execution": false
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6SJ3JGAS2TPfKjYHJ2Vf459O27oRym",
                            "name": "Get Data from NetBox",
                            "title": "Check if Prefix Exists",
                            "type": "workflow.atomic_workflow",
                            "base_type": "subworkflow",
                            "properties": {
                              "continue_on_failure": true,
                              "display_name": "Check if Prefix Exists",
                              "input": {
                                "variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxB": "api/ipam/prefixes/",
                                "variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxC": "prefix=$activity.definition_activity_02RVW6SH2XS327X0wkT5VAp43l2oM9VrqiP.output.script_queries.parent_prefix$"
                              },
                              "runtime_user": {
                                "target_default": true
                              },
                              "skip_execution": false,
                              "target": {
                                "override_workflow_target_group_criteria": true,
                                "target_group": {
                                  "run_on_all_targets": false,
                                  "use_criteria": {
                                    "choose_target_using_algorithm": "choose_first_with_matching_criteria",
                                    "conditions": [
                                      {
                                        "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                                        "operator": "eq",
                                        "right_operand": "$global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh.global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh$"
                                      }
                                    ]
                                  }
                                }
                              },
                              "workflow_id": "definition_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxA",
                              "workflow_name": "Get Data from NetBox"
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6SKXOKRQ5hGB9kODBRHv3AJn6rtFGB",
                            "name": "Execute Python Script",
                            "title": "Check Prefix Exists",
                            "type": "python3.script",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "continue_on_failure": false,
                              "display_name": "Check Prefix Exists",
                              "script": "import json\nimport sys\n\nprefixes = json.loads(sys.argv[1]) if sys.argv[1] else []\nprefix_exists = len(prefixes) > 0",
                              "script_arguments": [
                                "$activity.definition_activity_02RVW6SJ3JGAS2TPfKjYHJ2Vf459O27oRym.output.variable_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxD$"
                              ],
                              "script_queries": [
                                {
                                  "script_query": "prefix_exists",
                                  "script_query_name": "prefix_exists",
                                  "script_query_type": "boolean"
                                }
                              ],
                              "skip_execution": false
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6SMVU1CY7elTGCPE0SaLRCcs8gaECX",
                            "name": "Condition Block",
                            "title": "Create Prefix if Not Exists",
                            "type": "logic.if_else",
                            "base_type": "activity",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Create Prefix if Not Exists",
                              "skip_execution": false
                            },
                            "object_type": "definition_activity",
                            "blocks": [
                              {
                                "unique_name": "definition_activity_02RVW6SO3O7LB11TZjKdQK0DA4e1anl7TvE",
                                "name": "Condition Branch",
                                "title": "If Prefix Does Not Exist",
                                "type": "logic.condition_block",
                                "base_type": "activity",
                                "properties": {
                                  "condition": {
                                    "left_operand": "$activity.definition_activity_02RVW6SKXOKRQ5hGB9kODBRHv3AJn6rtFGB.output.script_queries.prefix_exists$",
                                    "operator": "eq",
                                    "right_operand": false
                                  },
                                  "continue_on_failure": false,
                                  "display_name": "If Prefix Does Not Exist",
                                  "skip_execution": false
                                },
                                "object_type": "definition_activity",
                                "actions": [
                                  {
                                    "unique_name": "definition_activity_02RVW6SQG8FB10r1G3mHI2WAa6kghpzBspO",
                                    "name": "Post Data to NetBox",
                                    "title": "Create Prefix",
                                    "type": "workflow.atomic_workflow",
                                    "base_type": "subworkflow",
                                    "properties": {
                                      "continue_on_failure": true,
                                      "display_name": "Create Prefix",
                                      "input": {
                                        "variable_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxB": "api/ipam/prefixes/",
                                        "variable_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxC": "$activity.definition_activity_02RVW6SH2XS327X0wkT5VAp43l2oM9VrqiP.output.script_queries.prefix_json$"
                                      },
                                      "runtime_user": {
                                        "target_default": true
                                      },
                                      "skip_execution": false,
                                      "target": {
                                        "override_workflow_target_group_criteria": true,
                                        "target_group": {
                                          "run_on_all_targets": false,
                                          "use_criteria": {
                                            "choose_target_using_algorithm": "choose_first_with_matching_criteria",
                                            "conditions": [
                                              {
                                                "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                                                "operator": "eq",
                                                "right_operand": "$global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh.global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh$"
                                              }
                                            ]
                                          }
                                        }
                                      },
                                      "workflow_id": "definition_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxA",
                                      "workflow_name": "Post Data to NetBox"
                                    },
                                    "object_type": "definition_activity"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "unique_name": "definition_activity_02RVW6SSQP8Q34hpuwxzEBPCXA8KuLrdrxC",
                            "name": "Post Data to NetBox",
                            "title": "Create IP Address",
                            "type": "workflow.atomic_workflow",
                            "base_type": "subworkflow",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Create IP Address",
                              "input": {
                                "variable_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxB": "api/ipam/ip-addresses/",
                                "variable_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxC": "$activity.definition_activity_02RVW6SH2XS327X0wkT5VAp43l2oM9VrqiP.output.script_queries.ip_json$"
                              },
                              "runtime_user": {
                                "target_default": true
                              },
                              "skip_execution": false,
                              "target": {
                                "override_workflow_target_group_criteria": true,
                                "target_group": {
                                  "run_on_all_targets": false,
                                  "use_criteria": {
                                    "choose_target_using_algorithm": "choose_first_with_matching_criteria",
                                    "conditions": [
                                      {
                                        "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                                        "operator": "eq",
                                        "right_operand": "$global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh.global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh$"
                                      }
                                    ]
                                  }
                                }
                              },
                              "workflow_id": "definition_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxA",
                              "workflow_name": "Post Data to NetBox"
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6SUJHVPN1RPk63pb3CEYZbjh1ZO48S",
                            "name": "Set Variables",
                            "title": "Store IP Address ID",
                            "type": "core.set_multiple_variables",
                            "base_type": "activity",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Store IP Address ID",
                              "skip_execution": false,
                              "variables_to_update": [
                                {
                                  "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxN$",
                                  "variable_value_new": "$activity.definition_activity_02RVW6SSQP8Q34hpuwxzEBPCXA8KuLrdrxC.output.variable_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxE$"
                                }
                              ]
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6SW5XP2K5cwJf9pw6Qa3FnFMuIK77w",
                            "name": "Execute Python Script",
                            "title": "Build Device Update JSON",
                            "type": "python3.script",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "continue_on_failure": false,
                              "display_name": "Build Device Update JSON",
                              "script": "import json\nimport sys\n\nip_id = int(sys.argv[1])\ndevice_update = {'primary_ip4': ip_id}\ndevice_json = json.dumps(device_update)",
                              "script_arguments": [
                                "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxN$"
                              ],
                              "script_queries": [
                                {
                                  "script_query": "device_json",
                                  "script_query_name": "device_json",
                                  "script_query_type": "string"
                                }
                              ],
                              "skip_execution": false
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02RVW6SY06X1J1i2zpz4bdqbA3guJSB89Oe",
                            "name": "Patch Data in NetBox",
                            "title": "Update Device Primary IP",
                            "type": "workflow.atomic_workflow",
                            "base_type": "subworkflow",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Update Device Primary IP",
                              "input": {
                                "variable_workflow_02RRTPAT00TUC0oWGXLkN1TmA8lXoe3RBxB": "api/dcim/devices/$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxH$/",
                                "variable_workflow_02RRTPAT00TUC0oWGXLkN1TmA8lXoe3RBxC": "$activity.definition_activity_02RVW6SW5XP2K5cwJf9pw6Qa3FnFMuIK77w.output.script_queries.device_json$"
                              },
                              "runtime_user": {
                                "target_default": true
                              },
                              "skip_execution": false,
                              "target": {
                                "override_workflow_target_group_criteria": true,
                                "target_group": {
                                  "run_on_all_targets": false,
                                  "use_criteria": {
                                    "choose_target_using_algorithm": "choose_first_with_matching_criteria",
                                    "conditions": [
                                      {
                                        "left_operand": "$targetgroup.target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4.common.display_name$",
                                        "operator": "eq",
                                        "right_operand": "$global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh.global.variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh$"
                                      }
                                    ]
                                  }
                                }
                              },
                              "workflow_id": "definition_workflow_02RRTPAT00TUC0oWGXLkN1TmA8lXoe3RBxA",
                              "workflow_name": "Patch Data in NetBox"
                            },
                            "object_type": "definition_activity"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "unique_name": "definition_activity_02RVW6SZPKJPT3OPeJsVo4YC4WAgTdWWrnE",
                "name": "Execute Python Script",
                "title": "Increment Counter",
                "type": "python3.script",
                "base_type": "activity",
                "properties": {
                  "action_timeout": 180,
                  "continue_on_failure": false,
                  "display_name": "Increment Counter",
                  "script": "import sys\nnew_count = int(sys.argv[1]) + 1",
                  "script_arguments": [
                    "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxF$"
                  ],
                  "script_queries": [
                    {
                      "script_query": "new_count",
                      "script_query_name": "new_count",
                      "script_query_type": "integer"
                    }
                  ],
                  "skip_execution": false
                },
                "object_type": "definition_activity"
              },
              {
                "unique_name": "definition_activity_02RVW6T10GNCE1rQnIP8lgYTLiuyQiKTKkW",
                "name": "Set Variables",
                "title": "Update Counter",
                "type": "core.set_multiple_variables",
                "base_type": "activity",
                "properties": {
                  "continue_on_failure": false,
                  "display_name": "Update Counter",
                  "skip_execution": false,
                  "variables_to_update": [
                    {
                      "variable_to_update": "$workflow.definition_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxA.local.variable_workflow_02RVWCIP00TUC0oWGXLkN1TmA8lXoe3RBxF$",
                      "variable_value_new": "$activity.definition_activity_02RVW6SZPKJPT3OPeJsVo4YC4WAgTdWWrnE.output.script_queries.new_count$"
                    }
                  ]
                },
                "object_type": "definition_activity"
              }
            ]
          }
        ]
      },
      {
        "unique_name": "definition_activity_02RVW6T2GTB625qC6k19n8ZD7avlYf8P6xu",
        "name": "Completed",
        "title": "Workflow Completed",
        "type": "logic.completed",
        "base_type": "activity",
        "properties": {
          "completion_type": "succeeded",
          "continue_on_failure": false,
          "display_name": "Workflow Completed",
          "result_message": "Successfully created prefixes and IP addresses for planned devices",
          "skip_execution": false
        },
        "object_type": "definition_activity"
      }
    ],
    "categories": [
      "category_02RRO197QIU1N4lnnTBXQ9QbmLLZtDXEIRN"
    ]
  },
  "categories": {
    "category_02RRO197QIU1N4lnnTBXQ9QbmLLZtDXEIRN": {
      "unique_name": "category_02RRO197QIU1N4lnnTBXQ9QbmLLZtDXEIRN",
      "name": "BRKOPS-2357",
      "title": "BRKOPS-2357",
      "type": "basic.category",
      "base_type": "category",
      "category_type": "custom",
      "object_type": "category"
    }
  },
  "targets": {
    "definition_target_02RPUNI85LRRY0UogrmrEt4WeuzlLfBLXMC": {
      "unique_name": "definition_target_02RPUNI85LRRY0UogrmrEt4WeuzlLfBLXMC",
      "name": "NetBox",
      "title": "NetBox",
      "type": "netbox.endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "_host": "192.168.99.93",
        "_port": 443,
        "_protocol": "https",
        "_tls_insecure": true,
        "ao_remote_id": "02PZPDMADVCHW17LBkiPU0VlP2JnyMUqY0D",
        "default_runtime_user_id": "definition_runtime_user_02Q33243345V15wqObawPAHY80bzrWVm6V9",
        "display_name": "NetBox",
        "ignore_proxy": false,
        "is_https_proxy": false
      }
    },
    "definition_target_02RRREVNL8TQP2SU3B72iz38cXw328WK69c": {
      "unique_name": "definition_target_02RRREVNL8TQP2SU3B72iz38cXw328WK69c",
      "name": "Google Maps API",
      "title": "Google Maps API",
      "type": "web-service.endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "disable_certificate_validation": false,
        "display_name": "Google Maps API",
        "host": "maps.googleapis.com",
        "ignore_proxy": false,
        "is_https_proxy": false,
        "no_runtime_user": true,
        "protocol": "https"
      }
    },
    "definition_target_02RW1NY1JGXS70l9Aa54VxKpnmAIn0qyix7": {
      "unique_name": "definition_target_02RW1NY1JGXS70l9Aa54VxKpnmAIn0qyix7",
      "name": "dCloud Catalyst Center",
      "title": "dCloud Catalyst Center",
      "type": "catalystcenter.endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "_host": "dcloud-dnac.its-best.ch",
        "_port": 443,
        "_protocol": "https",
        "_tls_insecure": false,
        "ao_remote_id": "02PZPDMADVCHW17LBkiPU0VlP2JnyMUqY0D",
        "default_runtime_user_id": "definition_runtime_user_02RW1NM2BFPUO4rGnvMziVKyNETmwk0mtwC",
        "display_name": "dCloud Catalyst Center",
        "ignore_proxy": false,
        "is_https_proxy": false
      }
    },
    "definition_target_02RWJAEBQ688P3taKFIxCFoaDpv420dWrUR": {
      "unique_name": "definition_target_02RWJAEBQ688P3taKFIxCFoaDpv420dWrUR",
      "name": "Docker Host",
      "title": "Docker Host",
      "type": "terminal.unix_linux_endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "ao_remote_id": "02PZPDMADVCHW17LBkiPU0VlP2JnyMUqY0D",
        "bash_shell": "/bin/bash",
        "default_runtime_user_id": "definition_runtime_user_02RWJ9VRRHAUM4OHSqzt53hP352v1fgRUz8",
        "display_name": "Docker Host",
        "host": "192.168.99.94",
        "port": 22
      }
    }
  },
  "runtime_users": {
    "definition_runtime_user_02Q33243345V15wqObawPAHY80bzrWVm6V9": {
      "unique_name": "definition_runtime_user_02Q33243345V15wqObawPAHY80bzrWVm6V9",
      "name": "NetBox",
      "title": "NetBox",
      "type": "runtime_user.netbox_token_credentials",
      "base_type": "runtime_user",
      "object_type": "definition_runtime_user",
      "properties": {
        "_token": "*****",
        "display_name": "NetBox"
      }
    },
    "definition_runtime_user_02RW1NM2BFPUO4rGnvMziVKyNETmwk0mtwC": {
      "unique_name": "definition_runtime_user_02RW1NM2BFPUO4rGnvMziVKyNETmwk0mtwC",
      "name": "dCloud CatC API User",
      "title": "dCloud CatC API User",
      "type": "runtime_user.catalystcenter_basic_credentials",
      "base_type": "runtime_user",
      "object_type": "definition_runtime_user",
      "properties": {
        "_password": "*****",
        "_username": "user1",
        "display_name": "dCloud CatC API User"
      }
    },
    "definition_runtime_user_02RWJ9VRRHAUM4OHSqzt53hP352v1fgRUz8": {
      "unique_name": "definition_runtime_user_02RWJ9VRRHAUM4OHSqzt53hP352v1fgRUz8",
      "name": "devnet",
      "title": "devnet",
      "type": "runtime_user.terminal_password_credentials",
      "base_type": "runtime_user",
      "object_type": "definition_runtime_user",
      "properties": {
        "display_name": "devnet",
        "password": "*****",
        "user": "devnet"
      }
    }
  },
  "atomic_workflows": [
    "definition_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxA",
    "definition_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxA",
    "definition_workflow_02RRTPAT00TUC0oWGXLkN1TmA8lXoe3RBxA"
  ],
  "remotemetas": {
    "remote_meta_02PZPDMARJFXL4cljmxILTXsdTRNhbPF9Nh": {
      "base_type": "remote_meta",
      "type": "generic.remote_meta",
      "name": "remote-wlsn-01",
      "title": "remote-wlsn-01",
      "version": "1.0.0",
      "properties": {
        "advanced": {
          "require_advanced": false
        },
        "cloud_type": "vmware",
        "display_name": "remote-wlsn-01",
        "network": {
          "dns_servers": "192.168.99.101,192.168.99.102",
          "gateway": "192.168.99.1",
          "ip_endpoint": "192.168.99.21/24",
          "is_static_ip": true
        },
        "proxy": {
          "require_proxy": false
        }
      },
      "unique_name": "remote_meta_02PZPDMARJFXL4cljmxILTXsdTRNhbPF9Nh",
      "object_type": "remote_meta"
    }
  },
  "dependent_workflows": [
    "definition_workflow_02RRTABC40TUC0oWGXLkN1TmA8lXoe3RBxA",
    "definition_workflow_02RRTPOS00TUC0oWGXLkN1TmA8lXoe3RBxA",
    "definition_workflow_02RRTPAT00TUC0oWGXLkN1TmA8lXoe3RBxA"
  ],
  "target_groups": {
    "target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4": {
      "unique_name": "target_group_02RYFETOZ4HR26rQvvJO9ivmfP7ZMiGrxM4",
      "name": "BRKOPS-2357",
      "title": "BRKOPS-2357",
      "type": "generic.target_group",
      "base_type": "target_group",
      "version": "1.0.0",
      "targets": [
        {
          "data_target_type": "catalystcenter.endpoint",
          "view_target_type": "catalystcenter.endpoint",
          "include_all_targets": false,
          "selected_target_ids": [
            "definition_target_02RW1NY1JGXS70l9Aa54VxKpnmAIn0qyix7"
          ]
        },
        {
          "data_target_type": "netbox.endpoint",
          "view_target_type": "netbox.endpoint",
          "include_all_targets": false,
          "selected_target_ids": [
            "definition_target_02RPUNI85LRRY0UogrmrEt4WeuzlLfBLXMC"
          ]
        },
        {
          "data_target_type": "terminal.unix_linux_endpoint",
          "view_target_type": "terminal.unix_linux_endpoint",
          "include_all_targets": false,
          "selected_target_ids": [
            "definition_target_02RWJAEBQ688P3taKFIxCFoaDpv420dWrUR"
          ]
        },
        {
          "data_target_type": "web-service.endpoint",
          "view_target_type": "web-service.endpoint",
          "include_all_targets": false,
          "selected_target_ids": [
            "definition_target_02RRREVNL8TQP2SU3B72iz38cXw328WK69c"
          ]
        }
      ],
      "object_type": "target_group"
    }
  },
  "variables": {
    "variable_02RYFOC3YODIW3enGXTKI03lEs1mRnrYdpk": {
      "unique_name": "variable_02RYFOC3YODIW3enGXTKI03lEs1mRnrYdpk",
      "properties": {
        "value": "dCloud Catalyst Center",
        "scope": "global",
        "name": "Target_CatC",
        "type": "datatype.string",
        "is_required": false,
        "display_on_wizard": false,
        "is_invisible": false,
        "variable_string_format": "text"
      },
      "object_type": "variable"
    },
    "variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh": {
      "unique_name": "variable_02RYFONKQYBK45LkKmbk7yRyaXFEzcffmwh",
      "properties": {
        "value": "NetBox",
        "scope": "global",
        "name": "Target_NetBox",
        "type": "datatype.string",
        "is_required": false,
        "display_on_wizard": false,
        "is_invisible": false,
        "variable_string_format": "text"
      },
      "object_type": "variable"
    }
  }
}